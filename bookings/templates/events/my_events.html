{% extends 'base.html' %} {% block content %} {% if heading == 'My Bookings' %}
<!-- My Bookings -->
<br>
<div id='page-container' class="container">
    <div class='row'>
        <h1>{{heading}}</h1>
        <p>
        <h5>Hey, {{username}}! {% if events|length == 0 %}
            <h5>You haven't booked any events!</h5>
            <h5><a href='{{url_for("events.view_all_events")}}'>Click here to get started.</a></h5>
            {% else %} Here is a list of all the past and upcoming events you've booked.
        </h5>
        </p>
    </div>
    {% for booking in bookings %}
    <br>
    <div class='row'>
        <div id='event-history-name' class='row border-bottom'>
            <div class='col-sm-12 col-md-9'>
                <h2>{{loop.index}}. <a
                        href='{{url_for("events.show", id=booking.bookings.id)}}'>{{booking.bookings.title}}</a></h2>
                <h3><strong>{{booking.bookings.date.strftime('%B %d, %Y @ %#I:%M
                        %p')}}</strong></h3>
                <h3>{{booking.bookings.venue}}</h3>
                <h6><strong>Booking ID: </strong>{{booking.id}} <strong>Booked On:
                    </strong>{{booking.booked_on.strftime('%d/%m/%Y @ %#I:%M %p')}}</h6>
                <h6><strong>Tickets Booked: </strong>{{booking.tickets_booked}} <strong>Total Cost:
                    </strong>{{"$%.2f"|format(booking.tickets_booked*booking.event.price)}}</h6>
            </div>
            <div class='col-sm-12 col-md-3'>
                <img src='{{booking.bookings.image}}' class='img-fluid img-thumbnail rounded'>
            </div>
            <p></p><br>
        </div>
    </div>
    <br> {% endfor %} {% endif %}
</div>
<!-- end container -->
{% else %}
<!-- My Events -->
<br>
<div id='page-container' class="container">
    <div class='row'>
        <h1>{{heading}}</h1>
        <p>
        <h5>Hey, {{username}}! {% if events|length == 0 %}
            <h5>You haven't created any events!</h5>
            <a href='{{url_for("events.create")}}'>Click here to get started.</a> {% else %} Here is a list of all the
            past and upcoming events you've created.<br>Click 'Edit Event' to update the details of an upcoming event.
        </h5>
        </p>
    </div>
    {% for event in events %}
    <br>
    <div class='row'>
        <div id='event-history-name' class='row border-bottom'>
            <div class='col-sm-12 col-md-9'>
                <h2>{{loop.index}}. <a href='{{url_for("events.show", id=event.id)}}'>{{event.title}}</a></h2>
                <h3><strong>{{event.date.strftime('%B %d, %Y @ %#I:%M
                        %p')}}</strong></h3>
                <h3>{{event.venue}}, {{event.event_city.name.title()}}</h3>
                <h6><strong>Event ID: </strong>{{event.id}}<strong> Created On: </strong>{{event.created_on.strftime('%d/%m/%Y')}}</h6>
                <h6><strong>Tickets Sold: </strong>{{event.tickets_booked}}</h6>
                <div class='row'>
                    <div class='col-md-6 col-xl-3'>
                        <a href='{{url_for("events.update_event", id=event.id)}}' class='btn btn-outline-dark'
                            id='edit-button' type='button' class='btn btn-dark'>Edit Event</a>
                        <button id='delete-button' type='button' class='btn btn-dark' data-bs-toggle='modal'
                            data-bs-target='#deleteEventModal'>
                            Delete Event
                        </button>
                    </div>
                </div>
                <!-- end row -->
            </div>
            <!-- end col -->
            <div class='col-sm-12 col-md-3' id='history-image'>
                <img src='{{event.image}}' class='img-fluid img-thumbnail rounded'>
            </div>
            <p></p><br>
        </div>
        <!-- end row border-->
    </div>
    <!-- end row -->
    <br>
    <!-- Modal -->
    <div class='modal fade' id='deleteEventModal' tabindex='-1' aria-labelledby='deleteEventModalLabel'
        aria-hidden='true'>
        <div class='modal-dialog'>
            <div class='modal-content'>
                <div class='modal-header'>
                    <h5 class='modal-title' id='deleteEventModalLabel'>{{event.title}}</h5>
                    <button type='button' class='btn-close' data-bs-dismiss='modal' aria-label='Close'></button>
                </div>
                <div class='modal-body'>
                    <p><strong>Are you sure you want to delete this event?</strong></p>
                    <a href='{{url_for("events.delete_event", id=event.id)}}' class='btn btn-danger' id='edit-button'
                        type='button' class='btn btn-dark'>Delete Event</a>
                </div>
            </div>
        </div>
    </div>
    {% endfor %} {% endif %}
</div>
<!-- end container -->
{% endif %} {% endblock %}